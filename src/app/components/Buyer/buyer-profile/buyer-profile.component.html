<app-navbar></app-navbar>


<div class="profile-container">
  <!-- Header Banner -->
  <div class="header-banner">
    <div class="banner-image"></div>
    
    <div class="profile-header">
      <div class="profile-info">
        <img [src]="profileImage" alt="Profile" class="profile-avatar" 
             onerror="this.src='https://ui-avatars.com/api/?name=ABFL+Pvt+Ltd&size=120&background=4a7c59&color=fff'">
        
        <div class="profile-details">
          <div class="profile-title">
            <h1>{{ profileName }}</h1>
            <button class="verify-btn">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M13 4L6 11L3 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <p class="profile-email">{{ profileEmail }}</p>
        </div>
      </div>
      
      <button class="verify-now-btn">Verify Now</button>
    </div>
  </div>

  <!-- Stats Section -->
  <div class="stats-section">
    <div class="stat-card">
      <div class="stat-value">{{ stats.projectsPartnered }}</div>
      <div class="stat-label">Projects Partnered</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-value">{{ formatNumber(stats.creditsSecured) }}</div>
      <div class="stat-label">Credited secured</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-value">{{ formatCurrency(stats.walletBalance) }}</div>
      <div class="stat-label">Wallet Balance</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-value">{{ stats.impactScore }}</div>
      <div class="stat-label">Impact Score</div>
    </div>
  </div>

  <!-- Projects Section -->
  <div class="projects-section">
    <h2 class="section-title">Upcoming Project List</h2>
    
    <!-- Filters and Controls -->
    <div class="controls-bar">
      <div class="search-filter">
        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2"/>
          <path d="M12 12L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input 
          type="text" 
          placeholder="Search Projects..." 
          [(ngModel)]="searchQuery"
          (ngModelChange)="onSearchChange()"
          class="search-input">
      </div>
      
      <div class="filter-controls">
        <select [(ngModel)]="selectedStatus" (ngModelChange)="onFilterChange()" class="filter-select">
          <option *ngFor="let option of statusOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
        
        <select [(ngModel)]="selectedSort" (ngModelChange)="onFilterChange()" class="filter-select">
          <option *ngFor="let option of sortOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
        
        <select [(ngModel)]="selectedPriceRange" (ngModelChange)="onFilterChange()" class="filter-select">
          <option *ngFor="let option of priceRangeOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
      
      <div class="view-controls">
        <button 
          class="view-btn" 
          [class.active]="viewMode === 'grid'"
          (click)="setViewMode('grid')">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
            <rect width="7" height="7"/>
            <rect x="11" width="7" height="7"/>
            <rect y="11" width="7" height="7"/>
            <rect x="11" y="11" width="7" height="7"/>
          </svg>
        </button>
        
        <button 
          class="view-btn" 
          [class.active]="viewMode === 'list'"
          (click)="setViewMode('list')">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor">
            <line x1="0" y1="3" x2="18" y2="3" stroke-width="2"/>
            <line x1="0" y1="9" x2="18" y2="9" stroke-width="2"/>
            <line x1="0" y1="15" x2="18" y2="15" stroke-width="2"/>
          </svg>
        </button>
        
        <button 
          class="view-btn" 
          [class.active]="viewMode === 'compact'"
          (click)="setViewMode('compact')">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
            <rect width="18" height="4"/>
            <rect y="7" width="18" height="4"/>
            <rect y="14" width="18" height="4"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Projects Grid/List -->
    <div class="projects-grid" [class.list-view]="viewMode === 'list'" [class.compact-view]="viewMode === 'compact'">
      <div *ngFor="let project of filteredProjects" class="project-card">
        <div class="project-image-container">
          <img [src]="project.image" [alt]="project.name" class="project-image">
          
          <div class="project-badges">
            <span class="status-badge" [class.in-stock]="project.status === 'stock'">
              {{ project.status === 'stock' ? 'In Stock' : 'Active' }}
            </span>
          </div>
          
          <button class="favorite-btn" (click)="toggleFavorite(project, $event)">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
              <path d="M10 17.5L8.75 16.375C4.5 12.5 2 10.25 2 7.5C2 5.25 3.75 3.5 6 3.5C7.25 3.5 8.45 4.05 10 5.1C11.55 4.05 12.75 3.5 14 3.5C16.25 3.5 18 5.25 18 7.5C18 10.25 15.5 12.5 11.25 16.375L10 17.5Z" stroke-width="2"/>
            </svg>
          </button>
          
          <div class="sdg-badge">
            <span class="sdg-number">{{ project.sdgs[0] }}</span>
            <span class="sdg-label">SDGs</span>
          </div>
        </div>
        
        <div class="project-content">
          <div *ngIf="project.badge" class="market-badge">{{ project.badge }}</div>
          
          <h3 class="project-name">{{ project.name }}</h3>
          <p class="project-description">{{ project.description }}</p>
          
          <div class="project-meta">
            <div class="meta-row">
              <span class="meta-label">Vintage:</span>
              <span class="meta-value">{{ project.vintage }}</span>
              
              <span class="meta-label">Country:</span>
              <span class="meta-value">{{ project.countryFlag }} {{ project.country }}</span>
            </div>
            
            <div class="meta-row">
              <span class="meta-label">Registry:</span>
              <span class="meta-value">{{ project.registry }}</span>
              
              <span class="meta-label">Industry:</span>
              <span class="meta-value">{{ project.industry }}</span>
            </div>
          </div>
          
          <div class="project-footer">
            <div class="price-info">
              <span class="price">${{ project.price }}</span>
              <span class="price-unit">/ton</span>
            </div>
            
            <div class="availability">
              <span class="available-label">Available:</span>
              <span class="available-value">{{ formatNumber(project.available) }} UD</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredProjects.length === 0" class="empty-state">
      <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
        <circle cx="32" cy="32" r="30" stroke="#ccc" stroke-width="2"/>
        <path d="M20 32L28 40L44 24" stroke="#ccc" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h3>No projects found</h3>
      <p>Try adjusting your filters or search query</p>
    </div>
  </div>
</div>