<div class="app-container">
  <!-- Sidebar -->
  <aside class="sidebar" [class.expanded]="isSidebarExpanded" [class.collapsed]="!isSidebarExpanded">
    <div class="sidebar-content">
      <div class="sidebar-header">
        <div class="logo">
         <img src="assets/images/collapseLogo.png" alt="Logo" style="width: 45px;" >
        </div>

       
       
        <div>
          <button class="sidebar-toggle" (click)="toggleSidebar()">
            <svg *ngIf="isSidebarExpanded" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
            <svg *ngIf="!isSidebarExpanded" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
      </div>
      
      <nav class="nav-menu">
        <a href="#" class="nav-item active">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
          </svg>
          <span *ngIf="isSidebarExpanded" class="nav-text">Dashboard</span>
        </a>
        
        <a href="#" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
          </svg>
          <span *ngIf="isSidebarExpanded" class="nav-text">Projects</span>
        </a>
        
        <a href="#" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/>
          </svg>
          <span *ngIf="isSidebarExpanded" class="nav-text">Team</span>
        </a>
      </nav>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="main-wrapper" [class.sidebar-expanded]="isSidebarExpanded">
    <!-- Top Navbar -->
    <header class="navbar">
      <div class="navbar-left">
        <button class="back-button" (click)="navigateToDashboard()">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
          </svg>
          Back To Dashboard
        </button>
      </div>
      
      <div class="navbar-right">
        <div class="notification-icon">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
          </svg>
        </div>
        
        <div class="user-info">
          <img [src]="userInfo.avatar" alt="User avatar" class="user-avatar">
          <span class="user-name">{{ userInfo.name }}</span>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="content">
      <div class="form-container">
        <div class="form-card">
          <h1 class="form-title">Register a New Project</h1>
          <p class="form-subtitle">Add a new carbon project to your ReFiHub portfolio. Provide basic details, upload documentation, and our team will help you through â€” from validation to tokenization.</p>
          
          <!-- Project Overview -->
          <section class="form-section">
            <h2 class="section-title">Project Overview</h2>
            <p class="section-description">These details help ReFiHub and partner registries identify and categorize your project.</p>
            
            <div class="form-group">
              <label class="form-label">Project Name</label>
              <input type="text" class="form-input" placeholder="Enter Project Name" [(ngModel)]="projectData.projectName">
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Project Type</label>
                <select class="form-select" [(ngModel)]="projectData.projectType">
                  <option value="">Select Project Type</option>
                  <option *ngFor="let type of projectTypes" [value]="type.id">{{ type.name }}</option>
                </select>
              </div>
              
              <div class="form-group">
                <label class="form-label">Project Category</label>
                <select class="form-select" [(ngModel)]="projectData.projectCategory">
                  <option value="">Select Project Category</option>
                  <option *ngFor="let category of projectCategories" [value]="category.id">{{ category.name }}</option>
                </select>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Country/ Region</label>
                <input type="text" class="form-input" placeholder="Project Location" [(ngModel)]="projectData.countryRegion">
              </div>
              
              <div class="form-group">
                <label class="form-label">Coordinates (Optional)</label>
                <input type="text" class="form-input" placeholder="Latitude, Longitude" [(ngModel)]="projectData.coordinates">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Estimated Start Date</label>
                <input type="text" class="form-input" placeholder="DD-MM-YYYY" [(ngModel)]="projectData.estimatedStartDate">
              </div>
              
              <div class="form-group">
                <label class="form-label">Expected Emission Reductions (tco2e/Year)</label>
                <input type="text" class="form-input" placeholder="For performance forecast" [(ngModel)]="projectData.expectedEmissionReductions">
              </div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Short Description</label>
              <textarea class="form-textarea" rows="3" placeholder="2-3 lines summary of project goals and impacts" [(ngModel)]="projectData.shortDescription"></textarea>
            </div>
          </section>

          <!-- Choose Service Model -->
          <section class="form-section">
            <h2 class="section-title">Choose Service Model</h2>
            <p class="section-description">You can update this preference before submitting the project.</p>
            
            <div class="service-options">
              <div class="service-card" [class.active]="projectData.serviceModel === 'guidance'" (click)="projectData.serviceModel = 'guidance'">
                <div class="service-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                  </svg>
                </div>
                <h3 class="service-title">Self service with guidance</h3>
                <p class="service-description">We can use expert guidance and assistance to assist you in creating the necessary documentation.</p>
              </div>
              
              <div class="service-card" [class.active]="projectData.serviceModel === 'concierge'" (click)="projectData.serviceModel = 'concierge'">
                <div class="service-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                  </svg>
                </div>
                <h3 class="service-title">full service (Concierge)</h3>
                <p class="service-description">all-in-one turn-key with accredited firm to prepare documentation and apply to third party validators.</p>
              </div>
            </div>
          </section>

          <!-- eRefererre -->
          <section class="form-section">
            <h2 class="section-title">eRefererre</h2>
            <p class="section-description">You can update this preference before submitting the project.</p>
            
            <div class="radio-group">
              <p class="radio-label">Does your project related to manufacturing , appeal or textile facilities</p>
              <div class="radio-options">
                <label class="radio-option">
                  <input type="radio" name="hasManufacturing" value="yes" [(ngModel)]="projectData.hasManufacturing">
                  <span>Yes</span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="hasManufacturing" value="no" [(ngModel)]="projectData.hasManufacturing">
                  <span>No</span>
                </label>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Higg Facility ID</label>
                <input type="text" class="form-input" placeholder="Enter Higg Facility ID" [(ngModel)]="projectData.higgFacilityId">
              </div>
              
              <div class="form-group">
                <label class="form-label">Facility Name</label>
                <input type="text" class="form-input" placeholder="Enter Facility Name" [(ngModel)]="projectData.facilityName">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Country / location</label>
                <select class="form-select" [(ngModel)]="projectData.facilityCountry">
                  <option value="">Select Country / location</option>
                  <option *ngFor="let country of countries" [value]="country.id">{{ country.name }}</option>
                </select>
              </div>
              
              <div class="form-group">
                <label class="form-label">Assessment year (Optional)</label>
                <input type="text" class="form-input" placeholder="DD-MM-YYYY" [(ngModel)]="projectData.assessmentYear">
              </div>
            </div>
          </section>

          <!-- Project Documentation Upload -->
          <section class="form-section">
            <h2 class="section-title">Project Documentation Upload</h2>
            <p class="section-description">Upload official, signed files only. Drafts will not be accepted for registry submission.</p>
            
            <div *ngFor="let doc of documentUploads" class="upload-section">
              <label class="upload-label">
                {{ doc.label }}
                <span *ngIf="doc.required" class="required-badge">(REQ)</span>
              </label>
              <p class="upload-placeholder">{{ doc.placeholder }}</p>
              
              <div class="upload-area" 
                   (dragover)="onDragOver($event)" 
                   (drop)="onDrop($event, doc.id)"
                   [class.has-file]="doc.file">
                <input type="file" 
                       [id]="'file-' + doc.id" 
                       class="file-input" 
                       (change)="onFileSelect($event, doc.id)">
                
                <label [for]="'file-' + doc.id" class="upload-label-inner">
                  <div *ngIf="!doc.file">
                    <div class="upload-icon">
                      <svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M16 4l-8 8h5v8h6v-8h5l-8-8zm-10 18v4h20v-4h2v6H4v-6h2z"/>
                      </svg>
                    </div>
                    <p class="upload-text">Drag and drop your file here, or click to browse</p>
                    <p class="upload-hint">Choose File</p>
                  </div>
                  
                  <div *ngIf="doc.file" class="file-info">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/>
                    </svg>
                    <span>{{ doc.file.name }}</span>
                    <button type="button" class="remove-file" (click)="removeFile(doc.id); $event.preventDefault()">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                      </svg>
                    </button>
                  </div>
                </label>
              </div>
            </div>
          </section>

          <!-- Blockchain Credit Delivery -->
          <section class="form-section">
            <h2 class="section-title">Blockchain Credit Delivery (Optional)</h2>
            <p class="section-description">If your credits are tokenized, they will be transferred to this wallet after issuance</p>
            
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="projectData.useDefaultWallet">
              <span>Use Default Wallet (from your profile settings)</span>
            </label>
          </section>

          <!-- Additional Notes -->
          <section class="form-section">
            <h2 class="section-title">Additional Notes (Optional)</h2>
            <textarea class="form-textarea" rows="4" placeholder="Add Special notes, registry requirements, (fill VVB or partner details if available" [(ngModel)]="projectData.additionalNotes"></textarea>
          </section>

          <!-- Confirmations -->
          <section class="form-section">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="projectData.confirmAccuracy">
              <span>I confirm that the information and documents provided are accurate.</span>
            </label>
            
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="projectData.understandRePa">
              <span>I understand that RePa-3 will review my project details and contact me if additional clarification or verification is required</span>
            </label>
            
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="projectData.agreeReview">
              <span>I agree that ReFiHub may review my submission and contact me for clarification.</span>
            </label>
          </section>

          <!-- Action Buttons -->
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="saveAsDraft()">Save as Draft</button>
            <button type="button" class="btn btn-primary" (click)="reviewAndSubmit()">Review & Submit project</button>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>